{"remainingRequest":"/home/colin/Workspace/src/platone-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/colin/Workspace/src/platone-frontend/src/components/page/Transactions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/colin/Workspace/src/platone-frontend/src/components/page/Transactions.vue","mtime":1599552868532},{"path":"/home/colin/Workspace/src/platone-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/colin/Workspace/src/platone-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/colin/Workspace/src/platone-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/colin/Workspace/src/platone-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {dataUrl} from '../../config'\nexport default {\n    data: function() {\n        return {\n            param: {\n                info: '',\n            },\n            txList:[],\n            currentPage:1,\n            PageSize:10,\n            totalCount:100\n        }\n    },\n    props:['blockNum','addr'],\n    methods: {\n        submitForm() {\n            this.$refs.search.validate(valid => {\n                if (valid) {\n                    this.axios.get(dataUrl + '/tx/' + this.param.info)\n                    .then(res => {\n                        if(res.data && res.data.tx_hash){\n                            this.$router.push('/tx/' + res.data.tx_hash);\n                        }\n                    }).catch(res => {\n                        return false;\n                    });\n                } else {\n                    this.$message.error(this.$t(\"i18n.searchInfo\"));\n                    return false;\n                }\n            });\n        },\n        getData(){\n            var url = dataUrl + '/txs'\n            if (this.blockNum){\n                url = dataUrl + \"/block/\" + this.blockNum + \"/txs\"\n            }\n            else if(this.addr){\n                url = dataUrl + \"/address/\" + this.addr + \"/txs\"\n            }\n            console.log(url)\n            this.axios.get(url,{\n                    params: {\n                        page_index: this.currentPage,\n                        page_size: this.PageSize\n                    }\n                }).then(res => {\n                    console.log(res.data.items)\n                this.txList = res.data.items;\n                this.totalCount = res.data.total;\n            }).catch(res => {\n                alert('wrong txdata');\n            });\n        },\n        handleCurrentChange(val){\n            this.currentPage = val;\n            this.getData();\n        },\n        handleSizeChange(val){\n            this.PageSize = val;\n            this.getData();\n        }\n    },\n    mounted:function() {\n        this.getData()\n        setInterval(this.getData(),2000)\n    },\n    computed:{\n        rules()\n        {\n            return {\n                info: [{ required: true, message: this.$t(\"i18n.searchInfo\"), trigger: 'blur' }]\n            }    \n        },\n    },\n    watch: {\n        '$route' (to, from) {\n            this.getData()\n        }\n    },\n};\n",{"version":3,"sources":["Transactions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Transactions.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\n<div>\n    <el-form :model=\"param\" :rules=\"rules\" ref=\"search\" label-width=\"0px\" class=\"ms-content\" @submit.native.prevent>\n        <el-form-item prop=\"info\">\n            <el-input v-model=\"param.info\" placeholder=\"Search by Transaction ID\" @keyup.enter.native=\"submitForm()\">\n                <el-button slot=\"prepend\" icon=\"el-icon-lx-search\"></el-button>\n            </el-input>\n        </el-form-item>\n    </el-form>\n    <div style=\"padding:0px 30px 10px 30px\">\n        <el-card shadow=\"hover\" >\n            <el-table :data=\"txList\">\n                <el-table-column :label=\"`${$t('i18n.txh')}`\" :width=\"140\" show-overflow-tooltip>\n                    <template slot-scope=\"scope\"><router-link :to = \"'/tx/' + scope.row.tx_hash\">{{scope.row.tx_hash}}</router-link></template>\n                </el-table-column>\n                <el-table-column :label=\"`${$t('i18n.bkh')}`\" :width=\"80\" show-overflow-tooltip>\n                    <template slot-scope=\"scope\"><router-link :to = \"'/block/' + scope.row.block_height\">{{scope.row.block_height}}</router-link></template>\n                </el-table-column>\n                <el-table-column :label=\"'From'\" :max-width=\"260\" show-overflow-tooltip >\n                    <template slot-scope=\"scope\"><router-link :to = \"'/address/' + scope.row.from + '/txs'\">{{scope.row.from}}</router-link></template>\n                </el-table-column>\n                <el-table-column :label=\"'To'\"  :max-width=\"260\" show-overflow-tooltip>\n                    <template slot-scope=\"scope\"><router-link :to = \"'/address/' + scope.row.to + '/txs'\">{{scope.row.to}}</router-link></template>\n                </el-table-column>\n                <el-table-column :label=\"`${$t('i18n.gasUsed')}`\">\n                <template slot-scope=\"scope\">\n                    <span>{{scope.row.gasUsed}}</span>\n                    <span>{{'('+ (scope.row.gas_used/scope.row.gas_limit*100).toFixed(4) + '%)'}}</span>\n                    <el-progress :show-text=\"false\" :stroke-width=\"5\" :percentage=\"scope.row.gas_used/scope.row.gas_limit*100\" ></el-progress>\n                </template>    \n            </el-table-column>\n            <el-table-column :label=\"`${$t('i18n.time')}`\" :width=\"160\"> \n                <template slot-scope=\"scope\">\n                    <span>{{(new Date(scope.row.timestamp *1000)).toLocaleString()}}</span>\n                </template>  \n            </el-table-column>\n            </el-table>\n            <el-pagination  \n                @current-change=\"handleCurrentChange\" \n                @size-change=\"handleSizeChange\"\n                :current-page=\"currentPage\" \n                :page-size=\"PageSize\" layout=\"total, sizes, prev, pager, next, jumper\" \n                :total=\"totalCount\">\n              </el-pagination>\n        </el-card>\n    </div>\n</div>\n    \n</template>\n\n<script>\nimport {dataUrl} from '../../config'\nexport default {\n    data: function() {\n        return {\n            param: {\n                info: '',\n            },\n            txList:[],\n            currentPage:1,\n            PageSize:10,\n            totalCount:100\n        }\n    },\n    props:['blockNum','addr'],\n    methods: {\n        submitForm() {\n            this.$refs.search.validate(valid => {\n                if (valid) {\n                    this.axios.get(dataUrl + '/tx/' + this.param.info)\n                    .then(res => {\n                        if(res.data && res.data.tx_hash){\n                            this.$router.push('/tx/' + res.data.tx_hash);\n                        }\n                    }).catch(res => {\n                        return false;\n                    });\n                } else {\n                    this.$message.error(this.$t(\"i18n.searchInfo\"));\n                    return false;\n                }\n            });\n        },\n        getData(){\n            var url = dataUrl + '/txs'\n            if (this.blockNum){\n                url = dataUrl + \"/block/\" + this.blockNum + \"/txs\"\n            }\n            else if(this.addr){\n                url = dataUrl + \"/address/\" + this.addr + \"/txs\"\n            }\n            console.log(url)\n            this.axios.get(url,{\n                    params: {\n                        page_index: this.currentPage,\n                        page_size: this.PageSize\n                    }\n                }).then(res => {\n                    console.log(res.data.items)\n                this.txList = res.data.items;\n                this.totalCount = res.data.total;\n            }).catch(res => {\n                alert('wrong txdata');\n            });\n        },\n        handleCurrentChange(val){\n            this.currentPage = val;\n            this.getData();\n        },\n        handleSizeChange(val){\n            this.PageSize = val;\n            this.getData();\n        }\n    },\n    mounted:function() {\n        this.getData()\n        setInterval(this.getData(),2000)\n    },\n    computed:{\n        rules()\n        {\n            return {\n                info: [{ required: true, message: this.$t(\"i18n.searchInfo\"), trigger: 'blur' }]\n            }    \n        },\n    },\n    watch: {\n        '$route' (to, from) {\n            this.getData()\n        }\n    },\n};\n</script>\n\n<style scoped>\n.ms-content {\n    padding: 30px 30px 10px 30px;\n}\n\n.btn{\n    width:100%\n}\n\na{\n    color: #3498db;\n}\n</style>\n\n"]}]}